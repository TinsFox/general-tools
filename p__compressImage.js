(self["webpackChunkgeneral_tools"]=self["webpackChunkgeneral_tools"]||[]).push([[212],{95250:function(e,r,s){"use strict";s.r(r);s(20228);var a=s(11382),n=(s(69315),s(76337)),l=(s(43185),s(98670)),t=(s(66126),s(99177)),i=s(90636),c=s(3182),o=(s(34792),s(48086)),d=s(8870),u=s(57337),p=(s(57663),s(71577)),x=(s(34669),s(54458)),v=(s(12968),s(62462)),h=(s(9715),s(16579)),g=(s(88983),s(47933)),m=s(1542),j=s(67294),_=s(71555),Z=s(98005),w=s.n(Z),b=s(85893),k={quality:.8,convertSize:5e6},f=g.ZP.Group,U=h.Z.Item,y=[{title:"\u539f\u59cb\u56fe\u7247",dataIndex:"previewUrl",key:"previewUrl",render:e=>(0,b.jsx)(v.Z,{src:e})},{title:"\u538b\u7f29\u56fe\u7247",dataIndex:"downloadUrl",key:"downloadUrl",render:e=>(0,b.jsx)(v.Z,{src:e})},{title:"\u538b\u7f29\u540e\u5c3a\u5bf8(B)",dataIndex:"size",key:"size",render:(e,r)=>{var s;return((null===r||void 0===r||null===(s=r.compressFile)||void 0===s?void 0:s.size)||e)+"B"}},{title:"\u538b\u7f29\u6bd4\u7387",dataIndex:"size",key:"size",render:(e,r)=>{var s,a=null===r||void 0===r||null===(s=r.compressFile)||void 0===s?void 0:s.size,n=a?Math.ceil(100*(1-a/e)):100;return(0,b.jsx)(x.Z,{percent:n,status:a?"active":"exception"})}},{title:"\u64cd\u4f5c",dataIndex:"name",key:"name",render:(e,r)=>{var s=r.downloadUrl;return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(p.Z,{disabled:!s,type:"link",download:e,href:s,children:"\u4e0b\u8f7d\u56fe\u7247"})})}}],N=()=>{var e=(0,j.useState)(!1),r=(0,u.Z)(e,2),s=r[0],p=r[1],x=(0,j.useState)([]),v=(0,u.Z)(x,2),Z=v[0],N=v[1],P=(0,j.useState)([]),z=(0,u.Z)(P,2),C=z[0],B=z[1],S=(0,j.useState)(k),F=(0,u.Z)(S,2),G=F[0],I=F[1];(0,j.useEffect)((()=>{Z.length&&O()}),[Z,G]);var L=(0,j.useCallback)(((e,r)=>{var s=r||G;return new Promise(((r,a)=>{new(w())(e.originFileObj,(0,d.Z)((0,d.Z)({},s),{},{success:s=>{var a=new Blob([s],{type:"application/octet-stream"}),n=window.URL.createObjectURL(a),l=window.URL.createObjectURL(e.originFileObj);r((0,d.Z)((0,d.Z)({},e),{},{compressFile:s,downloadUrl:n,previewUrl:l}))},error:e=>{console.error(e),a(e)}}))}))}),[G]),M=(0,j.useCallback)((e=>{var r=(0,d.Z)((0,d.Z)({},G),e);o.default.info("\u68c0\u6d4b\u5230\u914d\u7f6e\u53d8\u66f4, \u6b63\u5728\u4e3a\u60a8\u91cd\u65b0\u538b\u7f29\u5f53\u524d\u4e0a\u4f20\u56fe\u7247, \u8bf7\u7a0d\u5019~"),I(r)}),[G,Z]),O=(0,j.useCallback)((0,c.Z)((0,i.Z)().mark((function e(){var r,s,a,n,l,t,c,o;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:p(!0),r=[],s=!1,a=!1,e.prev=4,l=(0,m.Z)(Z);case 6:return e.next=8,l.next();case 8:if(!(s=!(t=e.sent).done)){e.next=23;break}return c=t.value,e.prev=10,e.next=13,L(c);case 13:o=e.sent,r.push(o),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](10),r.push(c);case 20:s=!1,e.next=6;break;case 23:e.next=29;break;case 25:e.prev=25,e.t1=e["catch"](4),a=!0,n=e.t1;case 29:if(e.prev=29,e.prev=30,!s||null==l.return){e.next=34;break}return e.next=34,l.return();case 34:if(e.prev=34,!a){e.next=37;break}throw n;case 37:return e.finish(34);case 38:return e.finish(29);case 39:p(!1),B(r);case 41:case"end":return e.stop()}}),e,null,[[4,25,29,39],[10,17],[30,,34,38]])}))),[Z,G,L]);return(0,b.jsx)("div",{className:"__general_tools-compress",children:(0,b.jsxs)(a.Z,{spinning:s,children:[(0,b.jsx)("div",{className:"__general_tools-compress-top",children:(0,b.jsxs)("div",{className:"__general_tools-inner",children:[(0,b.jsx)("p",{children:"\u6ce8: \u9ed8\u8ba4\u538b\u7f29\u4e0a\u9650\u5927\u5c0f\u4e3a5MB, \u82e5\u8d85\u8fc75MB\u7684png\u4f1a\u88ab\u81ea\u52a8\u8f6c\u5316\u4e3ajpg"}),(0,b.jsxs)(h.Z,{initialValues:G,onValuesChange:M,children:[(0,b.jsx)(U,{label:"\u538b\u7f29\u8d28\u91cf",name:"quality",tooltip:"\u6570\u503c\u8d8a\u5927, \u8d28\u91cf\u8d8a\u5927, \u538b\u7f29\u7387\u8d8a\u4f4e",children:(0,b.jsx)(t.Z,{min:0,max:1,step:.2})}),(0,b.jsx)(U,{label:"\u6587\u4ef6\u9650\u5236",name:"convertSize",tooltip:"\u662f\u5426\u53d6\u6d885MB\u6587\u4ef6\u9650\u5236",children:(0,b.jsxs)(f,{children:[(0,b.jsx)(g.ZP,{value:5e6,children:"5MB"}),(0,b.jsx)(g.ZP,{value:1/0,children:"\u65e0\u4e0a\u9650"})]})})]}),(0,b.jsxs)(l.Z.Dragger,{multiple:!0,maxCount:20,showUploadList:!1,accept:".png,.jpg,.jpeg,.PNG,.JPG,.JPEG",className:"__general_tools-compress-dragger",beforeUpload:()=>!1,onChange:e=>{N(e.fileList)},children:[(0,b.jsx)(_.Z,{}),(0,b.jsx)("p",{className:"__general_tools-compress-dragger-title",children:"\u5c06WebP\u3001JPEG\u548cPNG\u56fe\u7247\u62d6\u653e\u5230\u8fd9\u91cc"}),(0,b.jsx)("p",{className:"__general_tools-compress-dragger-desc",children:"\u6700\u591a20\u5f20\u56fe\u7247"})]}),(0,b.jsx)("p",{className:"__general_tools-compress-dragger-title",children:"_(:\u0437\u300d\u2220)_ \u538b\u7f29\u6548\u679c\u6ca1\u6709\u4fdd\u8bc1, \u7406\u6027\u4f7f\u7528"})]})}),(0,b.jsx)("div",{className:"__general_tools-inner __general_tools-compress-table",children:(0,b.jsx)(n.Z,{columns:y,dataSource:C,rowKey:e=>{var r=e.uid;return r},pagination:!1})})]})})};r["default"]=N}}]);