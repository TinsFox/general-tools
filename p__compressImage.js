(self["webpackChunkgeneral_tools"]=self["webpackChunkgeneral_tools"]||[]).push([[212],{95250:function(e,r,s){"use strict";s.r(r);s(20228);var n=s(11382),a=(s(70057),s(43650)),l=(s(43185),s(98670)),t=(s(66126),s(64392)),i=s(3182),c=(s(34792),s(48086)),o=s(8870),d=s(57337),u=(s(57663),s(71577)),p=(s(34669),s(32074)),x=(s(12968),s(62462)),v=(s(9715),s(82482)),h=(s(88983),s(47933)),g=s(1542),m=s(94043),j=s.n(m),_=s(67294),Z=s(71555),w=s(98005),b=s.n(w),k=s(85893),f={quality:.8,convertSize:5e6},U=h.ZP.Group,y=v.Z.Item,N=[{title:"\u539f\u59cb\u56fe\u7247",dataIndex:"previewUrl",key:"previewUrl",render:e=>(0,k.jsx)(x.Z,{src:e})},{title:"\u538b\u7f29\u56fe\u7247",dataIndex:"downloadUrl",key:"downloadUrl",render:e=>(0,k.jsx)(x.Z,{src:e})},{title:"\u538b\u7f29\u540e\u5c3a\u5bf8(B)",dataIndex:"size",key:"size",render:(e,r)=>{var s;return((null===r||void 0===r||null===(s=r.compressFile)||void 0===s?void 0:s.size)||e)+"B"}},{title:"\u538b\u7f29\u6bd4\u7387",dataIndex:"size",key:"size",render:(e,r)=>{var s,n=null===r||void 0===r||null===(s=r.compressFile)||void 0===s?void 0:s.size,a=n?Math.ceil(100*(1-n/e)):100;return(0,k.jsx)(p.Z,{percent:a,status:n?"active":"exception"})}},{title:"\u64cd\u4f5c",dataIndex:"name",key:"name",render:(e,r)=>{var s=r.downloadUrl;return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(u.Z,{disabled:!s,type:"link",download:e,href:s,children:"\u4e0b\u8f7d\u56fe\u7247"})})}}],P=()=>{var e=(0,_.useState)(!1),r=(0,d.Z)(e,2),s=r[0],u=r[1],p=(0,_.useState)([]),x=(0,d.Z)(p,2),m=x[0],w=x[1],P=(0,_.useState)([]),z=(0,d.Z)(P,2),C=z[0],B=z[1],S=(0,_.useState)(f),F=(0,d.Z)(S,2),G=F[0],I=F[1];(0,_.useEffect)((()=>{m.length&&O()}),[m,G]);var L=(0,_.useCallback)(((e,r)=>{var s=r||G;return new Promise(((r,n)=>{new(b())(e.originFileObj,(0,o.Z)((0,o.Z)({},s),{},{success:s=>{var n=new Blob([s],{type:"application/octet-stream"}),a=window.URL.createObjectURL(n),l=window.URL.createObjectURL(e.originFileObj);r((0,o.Z)((0,o.Z)({},e),{},{compressFile:s,downloadUrl:a,previewUrl:l}))},error:e=>{console.error(e),n(e)}}))}))}),[G]),M=(0,_.useCallback)((e=>{var r=(0,o.Z)((0,o.Z)({},G),e);c.default.info("\u68c0\u6d4b\u5230\u914d\u7f6e\u53d8\u66f4, \u6b63\u5728\u4e3a\u60a8\u91cd\u65b0\u538b\u7f29\u5f53\u524d\u4e0a\u4f20\u56fe\u7247, \u8bf7\u7a0d\u5019~"),I(r)}),[G,m]),O=(0,_.useCallback)((0,i.Z)(j().mark((function e(){var r,s,n,a,l,t,i,c,o;return j().wrap((function(e){while(1)switch(e.prev=e.next){case 0:u(!0),r=[],s=!0,n=!1,e.prev=4,l=(0,g.Z)(m);case 6:return e.next=8,l.next();case 8:return t=e.sent,s=t.done,e.next=12,t.value;case 12:if(i=e.sent,s){e.next=28;break}return c=i,e.prev=15,e.next=18,L(c);case 18:o=e.sent,r.push(o),e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](15),r.push(c);case 25:s=!0,e.next=6;break;case 28:e.next=34;break;case 30:e.prev=30,e.t1=e["catch"](4),n=!0,a=e.t1;case 34:if(e.prev=34,e.prev=35,s||null==l.return){e.next=39;break}return e.next=39,l.return();case 39:if(e.prev=39,!n){e.next=42;break}throw a;case 42:return e.finish(39);case 43:return e.finish(34);case 44:u(!1),B(r);case 46:case"end":return e.stop()}}),e,null,[[4,30,34,44],[15,22],[35,,39,43]])}))),[m,G,L]);return(0,k.jsx)("div",{className:"__general_tools-compress",children:(0,k.jsxs)(n.Z,{spinning:s,children:[(0,k.jsx)("div",{className:"__general_tools-compress-top",children:(0,k.jsxs)("div",{className:"__general_tools-inner",children:[(0,k.jsx)("p",{children:"\u6ce8: \u9ed8\u8ba4\u538b\u7f29\u4e0a\u9650\u5927\u5c0f\u4e3a5MB, \u82e5\u8d85\u8fc75MB\u7684png\u4f1a\u88ab\u81ea\u52a8\u8f6c\u5316\u4e3ajpg"}),(0,k.jsxs)(v.Z,{initialValues:G,onValuesChange:M,children:[(0,k.jsx)(y,{label:"\u538b\u7f29\u8d28\u91cf",name:"quality",tooltip:"\u6570\u503c\u8d8a\u5927, \u8d28\u91cf\u8d8a\u5927, \u538b\u7f29\u7387\u8d8a\u4f4e",children:(0,k.jsx)(t.Z,{min:0,max:1,step:.2})}),(0,k.jsx)(y,{label:"\u6587\u4ef6\u9650\u5236",name:"convertSize",tooltip:"\u662f\u5426\u53d6\u6d885MB\u6587\u4ef6\u9650\u5236",children:(0,k.jsxs)(U,{children:[(0,k.jsx)(h.ZP,{value:5e6,children:"5MB"}),(0,k.jsx)(h.ZP,{value:1/0,children:"\u65e0\u4e0a\u9650"})]})})]}),(0,k.jsxs)(l.Z.Dragger,{multiple:!0,maxCount:20,showUploadList:!1,accept:".png,.jpg,.jpeg,.PNG,.JPG,.JPEG",className:"__general_tools-compress-dragger",beforeUpload:()=>!1,onChange:e=>{w(e.fileList)},children:[(0,k.jsx)(Z.Z,{}),(0,k.jsx)("p",{className:"__general_tools-compress-dragger-title",children:"\u5c06WebP\u3001JPEG\u548cPNG\u56fe\u7247\u62d6\u653e\u5230\u8fd9\u91cc"}),(0,k.jsx)("p",{className:"__general_tools-compress-dragger-desc",children:"\u6700\u591a20\u5f20\u56fe\u7247"})]}),(0,k.jsx)("p",{className:"__general_tools-compress-dragger-title",children:"_(:\u0437\u300d\u2220)_ \u538b\u7f29\u6548\u679c\u6ca1\u6709\u4fdd\u8bc1, \u7406\u6027\u4f7f\u7528"})]})}),(0,k.jsx)("div",{className:"__general_tools-inner __general_tools-compress-table",children:(0,k.jsx)(a.Z,{columns:N,dataSource:C,rowKey:e=>{var r=e.uid;return r},pagination:!1})})]})})};r["default"]=P}}]);